import{R as A,r as H,f as Lt,b as d,F as zt,j as T,h as Bt,i as Rt}from"./vendor-262f8ba3.chunk.js";import{c as Pt,E as mt,L as vt,S as Qt,g as Mt,u as Wt}from"./404-a52e1c64.js";import{G as St,c as _t,_ as dt,d as pt,D as Yt,f as bt,E as Ot,L as z,e as M,g as kt,A as Dt,i as K,h as Et,j as N,k as qt,l as Q,m as q,n as at,o as Ht,p as Vt,q as Ut,r as Gt,s as Zt,t as Xt,v as X,X as It,Y as jt,w as Jt,u as Tt,b as $,x as te,R as ee,B as ne,T as re,a as ut,P as ae}from"./Tab-5c183902.chunk.js";import{h as J}from"./moment-e953ecbf.chunk.js";import{H as ie}from"./index-658e0e07.chunk.js";var oe=["type","layout","connectNulls","ref"];function V(t){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(t)}function se(t,e){if(t==null)return{};var r=le(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function le(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},et.apply(this,arguments)}function gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gt(Object(r),!0).forEach(function(n){j(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y(t){return pe(t)||de(t)||ue(t)||ce()}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(t,e){if(t){if(typeof t=="string")return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(t,e)}}function de(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pe(t){if(Array.isArray(t))return ft(t)}function ft(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ct(n.key),n)}}function he(t,e,r){return e&&xt(t.prototype,e),r&&xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}function ht(t,e){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ht(t,e)}function me(t){var e=be();return function(){var n=it(t),a;if(e){var i=it(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ve(this,a)}}function ve(t,e){if(e&&(V(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(t)}function R(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function be(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function it(t){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},it(t)}function j(t,e,r){return e=Ct(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ct(t){var e=ge(t,"string");return V(e)==="symbol"?e:String(e)}function ge(t,e){if(V(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(V(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rt=function(t){ye(r,t);var e=me(r);function r(){var n;fe(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i)),j(R(n),"state",{isAnimationFinished:!0,totalLength:0}),j(R(n),"getStrokeDasharray",function(s,u,p){for(var h=p.reduce(function(b,x){return b+x}),y=Math.floor(s/h),f=s%h,l=u-s,c=[],v=0,m=0;;m+=p[v],++v)if(m+p[v]>f){c=[].concat(Y(p.slice(0,v)),[f-m]);break}var g=c.length%2===0?[0,l]:[l];return[].concat(Y(r.repeat(p,y)),Y(c),g).map(function(b){return"".concat(b,"px")}).join(", ")}),j(R(n),"id",_t("recharts-line-")),j(R(n),"pathRef",function(s){n.mainCurve=s}),j(R(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),j(R(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return he(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var a=this.getTotalLength();this.setState({totalLength:a})}}},{key:"getTotalLength",value:function(){var a=this.mainCurve;try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(a,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.points,u=o.xAxis,p=o.yAxis,h=o.layout,y=o.children,f=bt(y,Ot);if(!f)return null;var l=function(m,g){return{x:m.x,y:m.y,value:m.value,errorVal:q(m.payload,g)}},c={clipPath:a?"url(#clipPath-".concat(i,")"):null};return A.createElement(z,c,f.map(function(v,m){return A.cloneElement(v,{key:"bar-".concat(m),data:s,xAxis:u,yAxis:p,layout:h,dataPointFormatter:l})}))}},{key:"renderDots",value:function(a,i,o){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var u=this.props,p=u.dot,h=u.points,y=u.dataKey,f=M(this.props),l=M(p,!0),c=h.map(function(m,g){var b=O(O(O({key:"dot-".concat(g),r:3},f),l),{},{value:m.value,dataKey:y,cx:m.x,cy:m.y,index:g,payload:m.payload});return r.renderDotItem(p,b)}),v={clipPath:a?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return A.createElement(z,et({className:"recharts-line-dots",key:"dots"},v,{role:"img"}),c)}},{key:"renderCurveStatically",value:function(a,i,o,s){var u=this.props,p=u.type,h=u.layout,y=u.connectNulls;u.ref;var f=se(u,oe),l=O(O(O({},M(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:a},s),{},{type:p,layout:h,connectNulls:y});return A.createElement(kt,et({},l,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(a,i){var o=this,s=this.props,u=s.points,p=s.strokeDasharray,h=s.isAnimationActive,y=s.animationBegin,f=s.animationDuration,l=s.animationEasing,c=s.animationId,v=s.animateNewValues,m=s.width,g=s.height,b=this.state,x=b.prevPoints,w=b.totalLength;return A.createElement(Dt,{begin:y,duration:f,isActive:h,easing:l,from:{t:0},to:{t:1},key:"line-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var P=S.t;if(x){var D=x.length/u.length,E=u.map(function(_,ct){var G=Math.floor(ct*D);if(x[G]){var Z=x[G],W=K(Z.x,_.x),Nt=K(Z.y,_.y);return O(O({},_),{},{x:W(P),y:Nt(P)})}if(v){var $t=K(m*2,_.x),Ft=K(g/2,_.y);return O(O({},_),{},{x:$t(P),y:Ft(P)})}return O(O({},_),{},{x:_.x,y:_.y})});return o.renderCurveStatically(E,a,i)}var F=K(0,w),I=F(P),L;if(p){var C="".concat(p).split(/[,\s]+/gim).map(function(_){return parseFloat(_)});L=o.getStrokeDasharray(I,w,C)}else L="".concat(I,"px ").concat(w-I,"px");return o.renderCurveStatically(u,a,i,{strokeDasharray:L})})}},{key:"renderCurve",value:function(a,i){var o=this.props,s=o.points,u=o.isAnimationActive,p=this.state,h=p.prevPoints,y=p.totalLength;return u&&s&&s.length&&(!h&&y>0||!Et(h,s))?this.renderCurveWithAnimation(a,i):this.renderCurveStatically(s,a,i)}},{key:"render",value:function(){var a,i=this.props,o=i.hide,s=i.dot,u=i.points,p=i.className,h=i.xAxis,y=i.yAxis,f=i.top,l=i.left,c=i.width,v=i.height,m=i.isAnimationActive,g=i.id;if(o||!u||!u.length)return null;var b=this.state.isAnimationFinished,x=u.length===1,w=pt("recharts-line",p),S=h&&h.allowDataOverflow,P=y&&y.allowDataOverflow,D=S||P,E=N(g)?this.id:g,F=(a=M(s))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=F.r,L=I===void 0?3:I,C=F.strokeWidth,_=C===void 0?2:C,ct=qt(s)?s:{},G=ct.clipDot,Z=G===void 0?!0:G,W=L*2+_;return A.createElement(z,{className:w},S||P?A.createElement("defs",null,A.createElement("clipPath",{id:"clipPath-".concat(E)},A.createElement("rect",{x:S?l:l-c/2,y:P?f:f-v/2,width:S?c:c*2,height:P?v:v*2})),!Z&&A.createElement("clipPath",{id:"clipPath-dots-".concat(E)},A.createElement("rect",{x:l-W/2,y:f-W/2,width:c+W,height:v+W}))):null,!x&&this.renderCurve(D,E),this.renderErrorBar(D,E),(x||s)&&this.renderDots(D,Z,E),(!m||b)&&Q.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"repeat",value:function(a,i){for(var o=a.length%2!==0?[].concat(Y(a),[0]):a,s=[],u=0;u<i;++u)s=[].concat(Y(s),Y(o));return s}},{key:"renderDotItem",value:function(a,i){var o;if(A.isValidElement(a))o=A.cloneElement(a,i);else if(dt(a))o=a(i);else{var s=pt("recharts-line-dot",a?a.className:"");o=A.createElement(Yt,et({},i,{className:s}))}return o}}]),r}(H.PureComponent);j(rt,"displayName","Line");j(rt,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!St.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});j(rt,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,o=t.dataKey,s=t.bandSize,u=t.displayedData,p=t.offset,h=e.layout,y=u.map(function(f,l){var c=q(f,o);return h==="horizontal"?{x:at({axis:r,ticks:a,bandSize:s,entry:f,index:l}),y:N(c)?null:n.scale(c),value:c,payload:f}:{x:N(c)?null:r.scale(c),y:at({axis:n,ticks:i,bandSize:s,entry:f,index:l}),value:c,payload:f}});return O({points:y,layout:h},p)});var st=function(){return null};st.displayName="ZAxis";st.defaultProps={zAxisId:0,range:[64,64],scale:"auto",type:"number"};function U(t){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(t)}function nt(){return nt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nt.apply(this,arguments)}function At(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?At(Object(r),!0).forEach(function(n){B(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Ae(t,e,r){return e&&wt(t.prototype,e),r&&wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function we(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yt(t,e)}function yt(t,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yt(t,e)}function Pe(t){var e=_e();return function(){var n=ot(t),a;if(e){var i=ot(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Se(this,a)}}function Se(t,e){if(e&&(U(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tt(t)}function tt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ot(t)}function B(t,e,r){return e=Kt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kt(t){var e=Oe(t,"string");return U(e)==="symbol"?e:String(e)}function Oe(t,e){if(U(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(U(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lt=function(t){we(r,t);var e=Pe(r);function r(){var n;xe(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=e.call.apply(e,[this].concat(i)),B(tt(n),"state",{isAnimationFinished:!1}),B(tt(n),"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),B(tt(n),"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),B(tt(n),"id",_t("recharts-scatter-")),n}return Ae(r,[{key:"renderSymbolsStatically",value:function(a){var i=this,o=this.props,s=o.shape,u=o.activeShape,p=o.activeIndex,h=M(this.props);return a.map(function(y,f){var l=k(k({key:"symbol-".concat(f)},h),y);return A.createElement(z,nt({className:"recharts-scatter-symbol"},Vt(i.props,y,f),{key:"symbol-".concat(f),role:"img"}),r.renderSymbolItem(p===f?u:s,l))})}},{key:"renderSymbolsWithAnimation",value:function(){var a=this,i=this.props,o=i.points,s=i.isAnimationActive,u=i.animationBegin,p=i.animationDuration,h=i.animationEasing,y=i.animationId,f=this.state.prevPoints;return A.createElement(Dt,{begin:u,duration:p,isActive:s,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(l){var c=l.t,v=o.map(function(m,g){var b=f&&f[g];if(b){var x=K(b.cx,m.cx),w=K(b.cy,m.cy),S=K(b.size,m.size);return k(k({},m),{},{cx:x(c),cy:w(c),size:S(c)})}var P=K(0,m.size);return k(k({},m),{},{size:P(c)})});return A.createElement(z,null,a.renderSymbolsStatically(v))})}},{key:"renderSymbols",value:function(){var a=this.props,i=a.points,o=a.isAnimationActive,s=this.state.prevPoints;return o&&i&&i.length&&(!s||!Et(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,s=i.xAxis,u=i.yAxis,p=i.children,h=bt(p,Ot);return h?h.map(function(y,f){var l=y.props.direction;return A.cloneElement(y,{key:f,data:o,xAxis:s,yAxis:u,layout:l==="x"?"vertical":"horizontal",dataPointFormatter:function(v,m){return{x:v.cx,y:v.cy,value:l==="x"?+v.node.x:+v.node.y,errorVal:q(v,m)}}})}):null}},{key:"renderLine",value:function(){var a=this.props,i=a.points,o=a.line,s=a.lineType,u=a.lineJointType,p=M(this.props),h=M(o),y,f;if(s==="joint")y=i.map(function(w){return{x:w.cx,y:w.cy}});else if(s==="fitting"){var l=Ut(i),c=l.xmin,v=l.xmax,m=l.a,g=l.b,b=function(S){return m*S+g};y=[{x:c,y:b(c)},{x:v,y:b(v)}]}var x=k(k(k({},p),{},{fill:"none",stroke:p&&p.fill},h),{},{points:y});return A.isValidElement(o)?f=A.cloneElement(o,x):dt(o)?f=o(x):f=A.createElement(kt,nt({},x,{type:u})),A.createElement(z,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var a=this.props,i=a.hide,o=a.points,s=a.line,u=a.className,p=a.xAxis,h=a.yAxis,y=a.left,f=a.top,l=a.width,c=a.height,v=a.id,m=a.isAnimationActive;if(i||!o||!o.length)return null;var g=this.state.isAnimationFinished,b=pt("recharts-scatter",u),x=p&&p.allowDataOverflow,w=h&&h.allowDataOverflow,S=x||w,P=N(v)?this.id:v;return A.createElement(z,{className:b,clipPath:S?"url(#clipPath-".concat(P,")"):null},x||w?A.createElement("defs",null,A.createElement("clipPath",{id:"clipPath-".concat(P)},A.createElement("rect",{x:x?y:y-l/2,y:w?f:f-c/2,width:x?l:l*2,height:w?c:c*2}))):null,s&&this.renderLine(),this.renderErrorBar(),A.createElement(z,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!m||g)&&Q.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(a,i){return a.animationId!==i.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,prevPoints:i.curPoints}:a.points!==i.curPoints?{curPoints:a.points}:null}},{key:"renderSymbolItem",value:function(a,i){var o;return A.isValidElement(a)?o=A.cloneElement(a,i):dt(a)?o=a(i):typeof a=="string"&&(o=A.createElement(Ht,nt({},i,{type:a}))),o}}]),r}(H.PureComponent);B(lt,"displayName","Scatter");B(lt,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!St.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});B(lt,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,o=t.xAxisTicks,s=t.yAxisTicks,u=t.offset,p=a.props.tooltipType,h=bt(a.props.children,Gt),y=N(e.dataKey)?a.props.dataKey:e.dataKey,f=N(r.dataKey)?a.props.dataKey:r.dataKey,l=n&&n.dataKey,c=n?n.range:st.defaultProps.range,v=c&&c[0],m=e.scale.bandwidth?e.scale.bandwidth():0,g=r.scale.bandwidth?r.scale.bandwidth():0,b=i.map(function(x,w){var S=q(x,y),P=q(x,f),D=!N(l)&&q(x,l)||"-",E=[{name:N(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:S,payload:x,dataKey:y,type:p},{name:N(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:P,payload:x,dataKey:f,type:p}];D!=="-"&&E.push({name:n.name||n.dataKey,unit:n.unit||"",value:D,payload:x,dataKey:l,type:p});var F=at({axis:e,ticks:o,bandSize:m,entry:x,index:w,dataKey:y}),I=at({axis:r,ticks:s,bandSize:g,entry:x,index:w,dataKey:f}),L=D!=="-"?n.scale(D):v,C=Math.sqrt(Math.max(L,0)/Math.PI);return k(k({},x),{},{cx:F,cy:I,x:F-C,y:I-C,xAxis:e,yAxis:r,zAxis:n,width:2*C,height:2*C,size:L,node:{x:S,y:P,z:D},tooltipPayload:E,tooltipPosition:{x:F,y:I},payload:x},h&&h[w]&&h[w].props)});return k({points:b},u)});var ke=Zt({chartName:"ComposedChart",GraphicalChild:[rt,Xt,X,lt],axisComponents:[{axisType:"xAxis",AxisComp:It},{axisType:"yAxis",AxisComp:jt},{axisType:"zAxis",AxisComp:st}],formatAxisMap:Jt});function De({ticker:t,token:e=null}){const r=J().format("YYYY-MM-DD"),n={dataset:"TaiwanStockDividendResult",data_id:t,start_date:`${J().year()-4}-01-01`,end_date:r},a=Pt(e?{...n,token:e}:n),i=Tt({url:"https://corsproxy.io/?"+encodeURIComponent("https://api.finmindtrade.com/api/v4/data"+a),timeout:8e3,headers:{"content-type":"application/x-www-form-urlencoded"}},[t]),[o,s]=H.useState(null);return H.useEffect(()=>{function u(){let p=null;const h=i.data;if(h.length){const y=h.reduce((l,c)=>{const v=J(c.date).year(),m="Q"+J(c.date).format("Q"),g=l.findIndex(b=>b.year===v);if(l.length===0||g===-1){const b={year:v};b[m]=c.stock_and_cache_dividend,b.total=c.stock_and_cache_dividend,l.push(b)}else l[g][m]?l[g][m]+=c.stock_and_cache_dividend:l[g][m]=c.stock_and_cache_dividend,l[g].total+=c.stock_and_cache_dividend;return l},[]),f=h.reduce((l,c)=>{const v=c.date.slice(0,4),m=c.date.slice(5),g=l.findIndex(b=>b.year===v);if(l.length===0||g===-1){const b={stock_id:c.stock_id,year:v,dividends:[{date:m,value:c.stock_and_cache_dividend}]};l.push(b)}else l[g].dividends.push({date:m,value:c.stock_and_cache_dividend});return l},[]);p={dividend_quarter:y.map(l=>({...l,Q1:l.Q1?parseFloat(l.Q1.toFixed(3)):null,Q2:l.Q2?parseFloat(l.Q2.toFixed(3)):null,Q3:l.Q3?parseFloat(l.Q3.toFixed(3)):null,Q4:l.Q4?parseFloat(l.Q4.toFixed(3)):null,total:l.total?parseFloat(l.total.toFixed(3)):null})),dividend_policy:f},s(p)}}i.data&&u()},[i.data]),{...i,data:o}}const Ee=Lt`
  ${{width:"100%",textAlign:"left","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}};
  caption {
    ${{borderBottomWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(97 97 97 / var(--tw-border-opacity))",padding:"0.5rem",textAlign:"left",fontSize:"1.125rem",lineHeight:"1.55"}}
  }
  td {
    ${{padding:"0.5rem","--tw-text-opacity":"1",color:"rgb(189 189 189 / var(--tw-text-opacity))"}}
    &:last-child {
      text-align: right;
    }
  }
  tr:nth-of-type(even) {
    ${{backgroundColor:"rgb(255 255 255 / 0.05)"}}
  }
  tfoot {
    td {
      ${{borderTopWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(97 97 97 / var(--tw-border-opacity))",textAlign:"right","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}}
    }
  }
`;function Ie({year:t,dividends:e}){var i;let r=e.reduce((o,s)=>Math.round((o+s.value)*1e3)/1e3,0);const n=(i=r.toString().split(".")[1])==null?void 0:i.length,a=n<=3?n:3;return r=parseFloat(r).toFixed(a),d($,{children:T("table",{css:Ee,children:[d("caption",{children:`${t}年度股息`}),d("tfoot",{children:d("tr",{children:d("td",{colSpan:"2",children:r})})}),d("tbody",{children:e.reverse().map(({date:o,value:s})=>T("tr",{children:[d("td",{children:o}),d("td",{children:s})]},o))})]})})}function je({ticker:t,token:e}){const{data:r,error:n,stage:a}=De({ticker:t,token:e}),i=r==null?void 0:r.dividend_quarter,o=r==null?void 0:r.dividend_policy,s=h=>h.charAt(0).toUpperCase()+h.slice(1),u=200;let p=null;if(a==="fetching"&&(p=d($,{children:d(vt,{})})),n&&(p=d($,{children:d(mt,{children:n.message})})),a==="fetched")if(!i)p=d($,{children:T("p",{className:"m-4 text-center text-white",children:[t," 未配息"]})});else{let h=d(ee,{height:300,debounce:300,children:T(ke,{data:i,barCategoryGap:"20%",children:[d(It,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fill:"#ccc"}}),d(jt,{hide:!0,padding:{top:30},domain:[0,"dataMax"]}),d(te,{formatter:s}),d(X,{dataKey:"Q1",stackId:"Quarter",fill:"#81c784",animationDuration:u,children:d(Q,{position:"center",dataKey:"Q1"})}),d(X,{dataKey:"Q2",stackId:"Quarter",fill:"#ef9a9a",animationDuration:u,children:d(Q,{position:"center",dataKey:"Q2"})}),d(X,{dataKey:"Q3",stackId:"Quarter",fill:"#bcaaa4",animationDuration:u,children:d(Q,{position:"center",dataKey:"Q3"})}),d(X,{dataKey:"Q4",stackId:"Quarter",fill:"#81d4fa",animationDuration:u,children:d(Q,{position:"center",dataKey:"Q4"})}),d(rt,{type:"linear",dataKey:"total",stroke:"#ffffff",isAnimationActive:!1,children:d(Q,{position:"top",dataKey:"total"})})]})}),y=o.reverse().map(({stock_id:f,year:l,dividends:c})=>d(Ie,{year:l,dividends:c},f));p=T("div",{className:"space-y-8",children:[d($,{children:h}),y]})}return d(zt,{children:p})}function Te({date:t,link:e,source:r,title:n}){const a=n.replace(" - "+r,"");function i(){window.open(e,"_blank")}return T($,{"data-name":"news-item",className:"text-white",onClick:i,children:[d("h1",{className:"text-lg",children:a}),T("footer",{className:"mt-4 text-sm text-right text-gray-400",children:[d("span",{children:r})," / ",d("time",{dateTime:t,children:t})]})]})}function Ce(t,e=null){const r=J().format("YYYY-MM-DD"),n={dataset:"TaiwanStockNews",data_id:t,start_date:r},a=Pt(e?{...n,token:e}:n),i=Tt({url:"https://corsproxy.io/?"+encodeURIComponent("https://api.finmindtrade.com/api/v4/data"+a),timeout:3e4,headers:{"content-type":"application/x-www-form-urlencoded",accept:"application / json"}},[t]);if(i.data){const o=[...i.data];i.data=o.reverse()}return i}function Ke({ticker:t,token:e}){const r=Ce(t,e),{data:n,error:a,stage:i}=r;let o=null;return i==="fetching"&&(o=d($,{children:d(vt,{})})),a&&(o=d($,{children:d(mt,{children:a.message})})),n&&(n.length>0?o=n.map((s,u)=>Bt(Te,{...s,key:u+s.date})):o=d($,{children:d("p",{className:"m-4 text-center text-white",children:"無相關新聞"})})),d("div",{className:"space-y-4",children:o})}function Ne(t){let e,r={tw:()=>({dataset:"TaiwanStockPrice",closeKey:"close",maxKey:"max",minKey:"min"}),us:()=>({dataset:"USStockPrice",closeKey:"Close",maxKey:"High",minKey:"Low"}),default(){throw new Error("unknown market")}};return e=t?r[t]:r.default,e()}function Re(){const t=Rt(),{market:e,token:r}=H.useContext(Qt),{dataset:n,closeKey:a,maxKey:i,minKey:o}=Ne(e),s=Mt(e),{data:u,error:p,stage:h}=Wt(s,r,`stocks_info_${e}`),y=(u==null?void 0:u.find(g=>g.stock_id===t.toUpperCase()))||null,[f,l]=H.useState(localStorage.getItem(`${e}_details_active_tab`)||"HistoryInfo"),c={HistoryInfo:d(ie,{dataset:n,data_id:t,token:r,closeKey:a,maxKey:i,minKey:o}),Dividend:d(je,{ticker:t,token:r}),StockNews:d(Ke,{ticker:t,token:r})};function v({component:g}){return c[g]}function m(g,b){l(b),localStorage.setItem(`${e}_details_active_tab`,b)}if(h==="fetched"&&!y)throw new Error(`查無 ${t} 資料。`);return T(ae,{name:"stock_details_portal",children:[y&&d(ne,{to:-1,stock_id:y.stock_id,title:y.stock_name}),h==="fetching"&&d(vt,{}),p&&d(mt,{children:p.message}),h==="fetched"&&T("div",{className:"min-h-full pb-8 bg-gray-900",children:[d("div",{"data-name":"tabs",className:"z-5 bg-primary sticky top-0 text-white",children:T(re,{value:f,onChange:m,TabIndicatorProps:{sx:{bgcolor:"white"}},textColor:"inherit","aria-label":"tabs for the stock details",children:[d(ut,{disableRipple:!0,label:"走勢",value:"HistoryInfo",sx:{fontSize:16}}),d(ut,{disableRipple:!0,label:"股息",value:"Dividend",sx:{fontSize:16,display:e!=="tw"?"none":"flex"},disabled:e!=="tw"}),d(ut,{disableRipple:!0,label:"新聞",value:"StockNews",sx:{fontSize:16,display:e!=="tw"?"none":"flex"},disabled:e!=="tw"})]})}),d("div",{"data-name":"tab-panel",className:"bg-gradient-to-b from-primary from-[60px] via-gray-900 via-[60px] to-gray-900 pt-8 px-2",children:d(v,{component:f},f)})]})]})}export{Re as StockDetails};
