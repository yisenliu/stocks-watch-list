import{e as I,g as j,b as f,j as E,r as D,F as G}from"./vendor-60533d1b.chunk.js";import{u as W,S as L,H,b as F,C as Y}from"./Tab-85230cac.chunk.js";import{c as q,L as B,E as X}from"./404-b20da86c.js";import{h as d}from"./moment-57df9225.chunk.js";var U={exports:{}},S={exports:{}},C={exports:{}},P;function K(){return P||(P=1,function(c,u){(function(r,t){c.exports=t()})(I,function(){function r(_,n,e){var s=(n-_)/e,i=!(s%.5)&&s%1,a=i?e:0;return a+(n-e*Math.round(s))}var t=r;return t})}(C)),C.exports}var R;function z(){return R||(R=1,function(c,u){(function(r,t){c.exports=t(K())})(I,function(r){function t(n,e,s,i){if(n===e)return 0;if(n>e){var a=n;n=e,e=a}e--;var p=r(n,s,i);return p-n<0&&(p+=i),p-n>e-n?0:1+parseInt((e-p)/i)}var _=t;return _})}(S)),S.exports}(function(c,u){(function(r,t){c.exports=t(z())})(I,function(r){function t(n){return n=+n,n>0?1:-1}var _={weekDays:function(e,s){var i=void 0,a=void 0,p=s.isBefore(e);p?(i=s,a=e):(i=e,a=s);var m=i.day(),o=Math.abs(a.diff(i,"days")),b=r(m,o+m,0,7),k=r(m,o+m,6,7),y=p?-1:1;return y*(o-(k+b))},weekendDays:function(e,s){var i=s.diff(e,"days"),a=this.weekDays(e,s);return i-a},addWeekDays:function(e,s){if(s===0||isNaN(s))return e;var i=t(s),a=e.day(),p=Math.abs(s),m=0;(a===0&&i===-1||a===6&&i===1)&&(m=1);var o=p;a!==0&&a!==6&&i>0?o+=a:a!==0&&a!==6&&i<0&&(o+=6-a);var b=Math.max(Math.floor(o/5)-1,0)+(o>5&&o%5>0?1:0);return m+=p+b*2,e.add(i*m,"days"),e},subtractWeekDays:function(e,s){return this.addWeekDays(e,-s)},isWeekDay:function(e){return e.isoWeekday()<6},isWeekendDay:function(e){return e.isoWeekday()>5}};return _})})(U);var Z=U.exports;const J=j(Z);function Q({options:c,currentIdx:u,onChange:r}){return f("div",{"data-name":"duration_picker",className:"flex -mx-4 -mb-4",children:c.map(({text:t},_)=>E("label",{className:"flex-1 py-2 text-center cursor-pointer border-b-3 "+(_===u?"border-white text-white":"border-transparent text-primary"),children:[f("input",{type:"radio",name:"duration",id:"",value:_,onChange:r,defaultChecked:_===u,className:"!hidden"}),t]},t))})}function $({dataset:c,data_id:u=null,token:r=null,start_date:t=d().subtract(5,"year").format("YYYY-MM-DD"),end_date:_=d().format("YYYY-MM-DD")}){const n={dataset:c,data_id:u,token:r,start_date:t,end_date:_};for(const[i,a]of Object.entries(n))a||delete n[i];const e=q(n);return W({url:{NVM_INC:"/Users/yisen/.nvm/versions/node/v22.18.0/include/node",npm_package_devDependencies__tailwindcss_typography:"^0.5.9",npm_package_devDependencies_prettier:"^2.8.7",npm_package_devDependencies_postcss_import:"^15.1.0",TERM_PROGRAM:"vscode",NODE:"/Users/yisen/.nvm/versions/node/v22.18.0/bin/node",INIT_CWD:"/Users/yisen/Documents/Web Design/stocks-watch-list",NVM_CD_FLAGS:"-q",npm_package_devDependencies_vite_imagetools:"^4.0.18",npm_package_dependencies_moment:"^2.29.4",npm_package_dependencies_axios:"^1.3.5",npm_package_homepage:"https://yisenliu.github.io/stocks-watch-list",npm_config_version_git_tag:"true",SHELL:"/bin/zsh",TERM:"xterm-256color",npm_package_devDependencies_vite:"^4.2.0",npm_package_dependencies_pace_js:"^1.2.4",npm_package_dependencies__emotion_styled:"^11.10.8",TMPDIR:"/var/folders/n7/7qh333xj6kg5jm92j4mvf0600000gn/T/",npm_package_dependencies__mui_icons_material:"^5.11.16",npm_package_scripts_lint:"eslint . --ext .js,.jsx",npm_config_init_license:"MIT",TERM_PROGRAM_VERSION:"1.103.2",npm_package_scripts_dev:"vite",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",npm_package_dependencies_flexsearch:"^0.7.31",npm_package_dependencies_twin_macro:"^3.3.1",npm_package_dependencies_moment_business:"^3.0.1",npm_package_private:"true",npm_config_registry:"https://registry.yarnpkg.com",npm_package_scripts_server:"node server.cjs",npm_package_dependencies_react_dom:"^18.2.0",npm_package_dependencies__vercel_speed_insights:"^1.2.0",npm_package_readmeFilename:"README.md",npm_package_dependencies_idb:"^7.1.1",USER:"yisen",NVM_DIR:"/Users/yisen/.nvm",npm_package_description:"自訂台股與美股上市公司股票與 ETF 觀察名單。",npm_package_devDependencies__types_react:"^18.0.28",COMMAND_MODE:"unix2003",npm_package_scripts_deploy:"gh-pages -d dist",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.B2zOm12515/Listeners",npm_package_dependencies_lodash:"^4.17.21",__CF_USER_TEXT_ENCODING:"0x1F5:0x2:0x35",npm_package_devDependencies_postcss:"^8.4.21",npm_package_devDependencies_eslint:"^8.38.0",npm_execpath:"/usr/local/lib/node_modules/yarn/bin/yarn.js",npm_package_devDependencies_vite_plugin_markdown:"^2.1.0",npm_package_dependencies__mui_material:"^5.12.2",npm_package_devDependencies_eslint_plugin_prettier:"^4.2.1",npm_package_devDependencies__types_react_dom:"^18.0.11",PATH:"/var/folders/n7/7qh333xj6kg5jm92j4mvf0600000gn/T/yarn--1756261260942-0.3255565421028481:/Users/yisen/Documents/Web Design/stocks-watch-list/node_modules/.bin:/Users/yisen/.config/yarn/link/node_modules/.bin:/Users/yisen/.nvm/versions/node/v22.18.0/libexec/lib/node_modules/npm/bin/node-gyp-bin:/Users/yisen/.nvm/versions/node/v22.18.0/lib/node_modules/npm/bin/node-gyp-bin:/Users/yisen/.nvm/versions/node/v22.18.0/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/opt/X11/bin:/Users/yisen/.yarn/bin:/Users/yisen/.config/yarn/global/node_modules/.bin:/Users/yisen/.nvm/versions/node/v22.18.0/bin:/Users/yisen/Library/Application Support/Code/User/globalStorage/github.copilot-chat/debugCommand",npm_config_argv:'{"remain":[],"cooked":["run","build"],"original":["run","build"]}',_:"/Users/yisen/Documents/Web Design/stocks-watch-list/node_modules/.bin/vite",npm_package_devDependencies__tailwindcss_aspect_ratio:"^0.4.2",__CFBundleIdentifier:"com.microsoft.VSCode",PWD:"/Users/yisen/Documents/Web Design/stocks-watch-list",npm_package_devDependencies_tailwindcss:"^3.3.2",npm_package_dependencies_highlight_words:"^1.2.2",npm_package_scripts_preview:"vite preview",npm_package_devDependencies_eslint_plugin_react_hooks:"^4.6.0",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"stocks-watch-list",npm_package_devDependencies__babel_preset_react:"^7.22.5",npm_package_scripts_build:"vite build",npm_package_scripts_start:"nvm use 22.18.0",npm_package_devDependencies_sass:"^1.61.0",npm_config_version_commit_hooks:"true",XPC_FLAGS:"0x0",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_package_devDependencies_vite_plugin_babel_macros:"^1.0.6",npm_package_dependencies_react_router_dom:"^6.11.1",npm_package_devDependencies__tailwindcss_forms:"^0.5.3",npm_config_bin_links:"true",npm_package_dependencies_react_beautiful_dnd:"^13.1.1",npm_package_engines_node:"^22.18.0",npm_package_devDependencies_eslint_config_prettier:"^8.8.0",XPC_SERVICE_NAME:"application.com.microsoft.VSCode.110862266.110862272",npm_package_dependencies__emotion_react:"^11.10.8",npm_package_version:"1.0.0",npm_package_devDependencies_autoprefixer:"^10.4.14",HOME:"/Users/yisen",SHLVL:"1",npm_package_type:"module",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_save_prefix:"^",npm_config_strict_ssl:"true",npm_package_devDependencies_cross_env:"^7.0.3",npm_config_version_git_message:"v%s",npm_package_scripts_buildForGithub:"cross-env GithubPages=true yarn run build",npm_package_config_breakpoints_1:"1024",LOGNAME:"yisen",YARN_WRAP_OUTPUT:"false",npm_package_config_breakpoints_0:"768",npm_lifecycle_script:"vite build",npm_package_devDependencies_gh_pages:"^5.0.0",VSCODE_GIT_IPC_HANDLE:"/var/folders/n7/7qh333xj6kg5jm92j4mvf0600000gn/T/vscode-git-037e65386d.sock",npm_package_scripts_clean_cache:"yarn cache clean",npm_package_devDependencies__vitejs_plugin_react_swc:"^3.3.2",npm_package_dependencies_react:"^18.2.0",NVM_BIN:"/Users/yisen/.nvm/versions/node/v22.18.0/bin",npm_package_dependencies__mui_x_data_grid_pro:"^6.9.0",npm_config_version_git_sign:"",npm_config_ignore_scripts:"",npm_config_user_agent:"yarn/1.22.22 npm/? node/v22.18.0 darwin x64",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",npm_package_dependencies_recharts:"^2.5.0",npm_package_dependencies_express:"^4.18.2",npm_config_init_version:"1.0.0",npm_config_ignore_optional:"",COLORTERM:"truecolor",npm_node_execpath:"/Users/yisen/.nvm/versions/node/v22.18.0/bin/node",npm_package_devDependencies_eslint_plugin_react:"^7.32.2",npm_package_dependencies_http_proxy_middleware:"^2.0.6",npm_config_version_tag_prefix:"v",NODE_ENV:"production",VIPSHOME:"/Users/runner/work/sharp-libvips/sharp-libvips/target"}.GithubPages?"https://corsproxy.io/?"+encodeURIComponent("https://api.finmindtrade.com/api/v4/data"+e):"/api/stock"+e,timeout:8e3,headers:{"content-type":"application/x-www-form-urlencoded"}},[u,c])}const h=[{startDate:d().subtract(d().dayOfYear()-1,"days"),text:"YTD"},{startDate:d().subtract(1,"months"),text:"1月"},{startDate:d().subtract(2,"months"),text:"3月"},{startDate:d().subtract(6,"months"),text:"6月"},{startDate:d().subtract(1,"years"),text:"1年"},{startDate:d().subtract(3,"years"),text:"3年"},{startDate:d().subtract(5,"years"),text:"5年"}];function ie({dataset:c,data_id:u,closeKey:r,minKey:t,maxKey:_,token:n,tooltipValueLabel:e}){const[s,i]=D.useState(parseInt(localStorage.getItem("current_duration_idx"))||0),[a,p]=D.useState({min:null,max:null}),{data:m,error:o,stage:b}=$({dataset:c,data_id:u,token:n}),k=m||[],y=k.length,M=J.weekDays(h[s].startDate,d()),T=h[s].text,x=y-M,l=D.useMemo(()=>{if(h[s].text==="YTD"){const v=k.findIndex(g=>g.date.includes(d().year()));return k.slice(v,y)}return k.slice(x>0?x:0,y)},[x]),V=y>0;function O(v){const g=parseInt(v.target.value);i(g),localStorage.setItem("current_duration_idx",g)}return D.useEffect(()=>{let v=null,g=null;l.forEach(w=>{const A=w[_],N=w[t];(!g||A>g)&&(g=A),(!v||N<v)&&(v=N)}),p({min:v,max:g})},[V,s]),f(Y,{in:l.length>0,collapsedSize:90,children:E(F,{"data-name":"price_history",className:"text-center",children:[b==="fetching"&&f(B,{}),o&&f(X,{children:o.message}),l.length>0&&E(G,{children:[f(L,{currentDurationLabel:T,currentValue:l[l.length-1][r],startValue:l[0][r],endDate:l[l.length-1].date,min:a.min,max:a.max}),f(H,{history:l,closeKey:r,tooltipValueLabel:e}),f(Q,{options:h,currentIdx:s,onChange:O})]})]})})}export{ie as H};
